<mat-card class="task-card" [class.completed]="task.completed" (click)="onCardClick()" tabindex="0" role="article"
  [attr.aria-label]="'Tarea: ' + task.title + '. ' + (task.completed ? 'Completada' : 'Pendiente')">
  <mat-card-content>
    <!-- Checkbox and title -->
    <div class="task-header">
      <mat-checkbox [checked]="task.completed" (change)="onToggle($event)"
        color="primary" class="task-checkbox"
        [attr.aria-label]="'Marcar tarea como ' + (task.completed ? 'pendiente' : 'completada')"></mat-checkbox>
      <h3 class="task-title" [class.completed]="task.completed">
        {{ task.title }}
      </h3>
    </div>

    <!-- Description -->
    <p class="task-description" [class.completed]="task.completed">
      {{ task.description }}
    </p>

    <!-- Date and status chip -->
    <div class="task-footer">
      <div class="task-date">
        <mat-icon class="date-icon">schedule</mat-icon>
        <span class="date-text">{{ task.createdAt | date:'short' }}</span>
        <span class="date-full" matTooltip="{{ getFormattedDate() }}">
          {{ getFormattedDate() }}
        </span>
      </div>
      <mat-chip-set aria-label="Estado de la tarea">
        <mat-chip [class.completed-chip]="task.completed" [class.pending-chip]="!task.completed">
          <mat-icon>{{ task.completed ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          {{ task.completed ? 'Completada' : 'Pendiente' }}
        </mat-chip>
      </mat-chip-set>
    </div>

    <!-- Actions -->
    <div class="task-actions">
      <button mat-icon-button color="primary" (click)="onEdit($event)" matTooltip="Editar tarea"
        aria-label="Editar tarea">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button color="warn" (click)="onDelete($event)" matTooltip="Eliminar tarea"
        aria-label="Eliminar tarea">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </mat-card-content>
</mat-card>
